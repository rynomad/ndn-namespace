function Repository (daemon){
  var self = this;
  this.worker = new Worker("./worker.js");
  var messageChannel = new MessageChannel();
  this.worker.postMessage(null, messageChannel.port1);
  daemon.connect("messageChannel", messageChannel.port2, function(faceID){
    self.faceID = faceID;
  });
  this.daemon = daemon;
  return this;
}

Repository.prototype.serve = function(prefix){
  this.daemon.addNextHop(prefix, this.faceID);
  return this;
};

module.exports = Repository;
